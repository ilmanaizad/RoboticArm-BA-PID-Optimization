controller_manager:
  ros__parameters:
    update_rate: 200  # bump from 100 -> 200 Hz for snappier loops

    joint_state_broadcaster:
      type: joint_state_broadcaster/JointStateBroadcaster

    joint_trajectory_controller:
      type: joint_trajectory_controller/JointTrajectoryController

joint_state_broadcaster:
  ros__parameters: {}

joint_trajectory_controller:
  ros__parameters:
    joints: [joint1, joint2, joint3]
    command_interfaces: [position]
    state_interfaces: [position, velocity]

    # --- Add these starting gains (conservative) ---
    gains:
      joint1: {p: 20.0, i: 0.0, d: 1.0, i_clamp_min: -0.0, i_clamp_max: 0.0}
      joint2: {p: 0.1,  i: 0.1, d: 0.5, i_clamp_min: -0.1, i_clamp_max: 0.1}   # keep the “good” set
      joint3: {p: 15.0, i: 0.0, d: 1.5, i_clamp_min: -0.0, i_clamp_max: 0.0}

    allow_partial_joints_goal: false
